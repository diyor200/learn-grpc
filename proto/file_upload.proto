syntax = "proto3";

option go_package = "fileupload.v1; fileuploadv1";

package fileupload;

message FileChunk {
  string name = 1;
  bytes data = 2;
  int64 offset = 3;
}

message UploadStatus {
  string message = 1;
  int64 size = 2;
  string sha256 = 3;
}

service FileService {
  // check how many bytes uploaded
  rpc CheckFile (CheckRequest) returns (CheckResponse) {}

  // uploaded file
  rpc FileUpload(stream FileChunk) returns (UploadStatus){}
}

message CheckRequest {
  string filename = 1;
}

message CheckResponse {
  int64 uploadedSize = 1;
}